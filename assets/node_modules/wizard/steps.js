var base_url = "https://localhost/CI/gated/";

var form = $(".validation-wizard").show();

$(".validation-wizard").steps({
    headerTag: "h6"
    , bodyTag: "section"
    , transitionEffect: "fade"
    , titleTemplate: '<span class="step">#index#</span> #title#'
    , labels: {
        finish: "Submit"
    }
    , onStepChanging: function (event, currentIndex, newIndex) {
        return currentIndex > newIndex || !(3 === newIndex && Number($("#age-2").val()) < 18) && (currentIndex < newIndex && (form.find(".body:eq(" + newIndex + ") label.error").remove(), form.find(".body:eq(" + newIndex + ") .error").removeClass("error")), form.validate().settings.ignore = ":disabled,:hidden", form.valid())
    }
    , onFinishing: function (event, currentIndex) {
        return form.validate().settings.ignore = ":disabled", form.valid()
    }
    , onFinished: function (event, currentIndex) {

        var data = new FormData(this);

        $.ajax({
            type: "POST",
            url: $(".validation-wizard").attr("action"),
            data: data,
            processData: false,
            contentType: false,
            beforeSend: function () {
                swal({
                    title: "Please Wait",
                    text: "Processing Community Details...",
                    type: "info",
                    showConfirmButton: false,
                    showCancelButton: false
                });
            },
            success: function (c_id) {
                swal({
                    title: "Process Successful",
                    text: "Community Detail Processed Successfully.",
                    type: "success",
                    showConfirmButton: true,
                    confirmButtonText: "Add Courts To This Community",
                    confirmButtonColor: "#008000",
                    showCancelButton: false
                },function () {
                    window.location.href = base_url +"admin/courts/" + c_id;
                });
            },
            error: function () {
                swal({
                    title: "Process Failed",
                    text: "Community Detail Processed Failed.",
                    type: "error",
                    showConfirmButton: true,
                    showCancelButton: false
                });
            }
        });

    }

}), $(".validation-wizard").validate({
    ignore: "input[type=hidden]"
    , errorClass: "text-danger"
    , successClass: "text-success"
    , highlight: function (element, errorClass) {
        $(element).removeClass(errorClass)
    }
    , unhighlight: function (element, errorClass) {
        $(element).removeClass(errorClass)
    }
    , errorPlacement: function (error, element) {
        error.insertAfter(element)
    }
    , rules: {
        email: {
            email: !0
        },
        c_name: {
            required: true
        },
        city: {
            required: true
        },
        location: {
            required: true
        },
        main_image: {
            required: true
        },
        other_images: {
            required: true
        },
        p_fname: {
            required: true
        },
        p_lname: {
            required: true
        },
        p_email: {
            required: true
        },
        p_phone: {
            required: true
        }
    }
});